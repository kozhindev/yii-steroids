# Application Types

Каждый тип - это описание одного или нескольких полей сущности (модели).
Тип дает понять приложению какой формат данных будет в этом поле, как его обрабатывать, как хранить и отображать.
В `yii2-core` каждый тип представлен в виде класса, который содержит слудющую информацию:

- Тип данных в БД (integer/varchar/date/...)
- Yii2 валидатор (validation rules)
- Yii2 поведения (behaviors)
- Форматирование для таблицы и представления
- Отображение элемента формы при добавлении/редактировании, а так же при поиске

## Компонент `types`

Все типы определяются через компонент приложения `types`, который нужно объявить в конфигурации:

```php
    'components' => [
        'types' => [
            'class' => 'steroids\components\Types',
        ],
        // ...
    ],
```

Сделано это того, чтобы можно было легко переопределять классы типов и добавлять свои.
Для добавления собственного типа необходимо создать класс, наследуемый от `\steroids\base\Type` и добавить его в конфигурацию:

```php
    'components' => [
        'types' => [
            'class' => 'steroids\components\Types',
            'types' => [
                'range' => [
                    'template' => 'с {start} по {end}',
                ],
                'first' => 'app\core\components\FirstType',
                'second' => [
                    'class' => 'app\core\components\SecondType',
                ],
            ]
        ],
        // ...
    ],
```

#№ Список типов

В `yii2-core` большинство основных типов уже существуют и их можно и нужно использовать. Вот эти типы:

### AutoTime

Определяет поле для автоматической записи в БД времени создания и/или времени обновления.

Параметры:

- `touchOnUpdate` Is update - параметр указывает каким из двух параметров является поле - `createTime` (время создания) или `updateTime` (время обновления).


### Boolean

Определяет булевое поле - да/нет.


### Custom

Определяет поле с возможность указать тип данных в БД. Тип не определяет никакого дополнительного поведения и форматирования над полем.
Данный тип предназначен для использования в тех случаях, когда никакой из других типов не подошел и нет времени (или необходимости) вводить новый тип.

Параметры:

- `dbType` Db type - тип данных в БД. Поддерживаются форматы из `\yii\db\Schema::TYPE_*`, с указанием длины `string(32)` или произвольным форматом `varchar(255)`


### DateTime, Date

Определяет поле с датой и временем (в случае `DateTime`). В БД формат данных будет `DATE` или `DATETIME`.

Параметры:

- `format` Format - формат отображения даты. Поддерживаются форматы из `\yii\i18n\Formatter` вида: `short`, `yyyy-mm-dd`, `php:Y-m-d`


### Enum

Используйте данных тип, если строковое значение поля выбирается из фиксированного списка, описанного в классе, унаследованным от `\steroids\base\Enum`

Параметры:

- `enumClassName` Class - полное имя enum класса


### File, Files

Данный тип предназначен для загрузки файлов и изображений, идентификатор которых сохраняется в определяемое поле.
Файл загружается и хранится в БД с помощью модуля `file`.

Тип `Files` отличается от `File` только тем, что ориентирован на хранение множества файлов, через связку many-many (для этого нужно создать many-many связь с указанием junction таблицы).


### Html

Тип для хранения в поле БД html кода. Форма предоставит для его формирования wysiwyg редактор, а представление корректно отобразит html код.


### Integer

Определяет поле с числом.

Параметры:

- `isDecimal` Decimal formatter - укажите как true, чтобы использовать `\yii\i18n\Formatter::asDecimal()` форматтер для отображения числа.


### Money

Тип для хранения денежной суммы с фиксированной валютой. Валюта указывается в параметре.

Параметры:

- `currency` Currency - указываемая валюта в формате 3-х буквенного кода по стандарту ISO 4217. Использует `\yii\i18n\Formatter::asCurrency()` для отоюражения валюты.


### PrimaryKey

Определяет числовое primary key поле, тип в БД - `\yii\db\Schema::TYPE_PK`


### Range

Позволяет хранить диапазон чисел или дат в двух полях модели. Не смотря на то, что в моделе будет задействовано два поля, в таблице мета полей это будет одна строка. Второй атрибут будет указан в параметре `To attribute`

Параметры:

- `subAppType` Application type - тип полей. Указывая `Date` - получается пероид, указывая `Integer` - диапазон чисел и так далее
- `refAttribute` To attribute - Название атрибута, в котором будет храниться конечная точка диапазона


### Relation

Данный тип используется для редактирования и отображения связи (relation). Для отображения данных используется метод модели `\steroids\base\Model::getModelLabel()`

Параметры:

- `relationName` Relation name - Имя связи


### Size

Определяет поле, в котором будет хранится размер файла. Для отображения используется метод `\yii\i18n\Formatter::asShortSize()`


### String

Текстовое поле с типом `VARCHAR` в БД.

Параметры:

- `stringType` Type - Тип поле (text/email/phone/password). Дополнительный тип указывает на формат данных. Например, при указании типа `email` поле формы будет выглядеть как `<input type="email" />`, а в представлении адрес отображаться ссылкой с `mailto:`
- `stringLength` Length - Длина поля для указания длины поля в БД. Например, при задании длины `32` тип в БД будет `VARCHAR(32)`.


### Text

Тестовое поле с переносами строк. Использует тип `TEXT` в БД и `textarea` в форме. При отображении учитывает переносы строк (`nl2br`).
